var Le=Object.defineProperty;var we=(e,t,s)=>t in e?Le(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var o=(e,t,s)=>(we(e,typeof t!="symbol"?t+"":t,s),s);import"./modulepreload-polyfill-3cfb730f.js";/* empty css              */import{a as P,U as d,b as Q}from"./addLoading-c08e133b.js";const xe={"empty-page":"none","home-page":"flex","playlist-info-page":"flex","rounds-mode-game-page":"block","credits-page":"block","tests-page":"flex"};function w(e){var s;const t=(s=document.getElementById("main"))==null?void 0:s.children;if(t)for(let n=0;n<t.length;n++){const i=t[n];i.style.display="none",i.id===e&&(i.style.display=xe[e])}}function Pe(e,t,s){var i;const n=(i=document.getElementById(e))==null?void 0:i.children;if(n)for(let r=0;r<n.length;r++){const c=n[r];c.style.display="none",c.id===t&&(c.style.display=s)}}const K="([A-Za-z0-9]{22})",Ie=new RegExp(`^${K}$`),pe=new RegExp(`^spotify:playlist:${K}$`),ye=new RegExp(`^https://open.spotify.com/playlist/${K}(\\?si=.*)?$`);function _e(e){return Ie.test(e)}function Ne(e){return pe.test(e)}function Be(e){return ye.test(e)}function Me(e){return e.match(pe)[1]}function Se(e){return e.match(ye)[1]}function Ae(e){if(e=e.trim(),Ne(e))return Me(e);if(Be(e))return Se(e);if(_e(e))return e;throw new Error("URI, URL ou ID inválido.")}class a{static reset(){this.resetCorrectAnswerCount(),this.resetRoundNumber(),this.resetCurrentTime(),this.resetExtraTriesCount(),this.resetRoundsHistory()}static get playlist(){return this._playlist}static set playlist(t){this._playlist=t}static get playlistId(){return this._playlistId}static set playlistId(t){this._playlistId=t}static get roundNumber(){return this._roundNumber}static resetRoundNumber(){this._roundNumber=1}static increaseRoundNumber(){if(this._totalRounds<=this._roundNumber)throw new Error("Número do round não pode ser maior que o número total de rounds");this._roundNumber++}static get totalRounds(){return this._totalRounds}static set totalRounds(t){this._totalRounds=t}static get correctAnswersCount(){return this._correctAnswerCount}static resetCorrectAnswerCount(){this._correctAnswerCount=0}static increaseCorrectAnswerCount(){if(this._totalRounds<=this._correctAnswerCount)throw new Error("Número de acertos não pode ser maior que o número total de rounds");this._correctAnswerCount++}static get musicPos(){return this._musicPos}static set musicPos(t){this._musicPos=t}static get musicPlaytime(){return this._musicPlaytime}static set musicPlaytime(t){this._musicPlaytime=t}static get musicsQnt(){return this._musicsQnt}static set musicsQnt(t){this._musicsQnt=t}static get extraTries(){return this._extraTries}static set extraTries(t){this._extraTries=t}static get currentTime(){return this._currentTime}static resetCurrentTime(){this._currentTime=0,this.roundCurrentTime=0}static increaseCurrentTime(){this._currentTime++,this.roundCurrentTime++}static get extraTriesCount(){return this._extraTriesCount}static resetExtraTriesCount(){this._extraTriesCount=0,this.roundExtraTriesCount=0}static increaseExtraTriesCount(){this._extraTriesCount++,this.roundExtraTriesCount++}static get roundsHistory(){return this._roundsHistory}static resetRoundsHistory(){this._roundsHistory=[]}static addRoundHistory(t,s){this.extraTries?this._roundsHistory.push({timeSpent:this.roundCurrentTime,correctMusic:t,guessedMusic:s}):this._roundsHistory.push({timeSpent:this.roundCurrentTime,correctMusic:t,guessedMusic:s,extraTriesCount:this.roundExtraTriesCount}),this.roundCurrentTime=0,this.roundExtraTriesCount=0}static get score(){return Math.round(Math.max(this._correctAnswerCount*100*(8/(this._musicPlaytime+3))-(this._currentTime+this._extraTriesCount*10),25*this._correctAnswerCount))}static get incorrectAnswerCount(){return this._totalRounds-this._correctAnswerCount}static get isPremiumMode(){return this._isPremiumMode}static set isPremiumMode(t){this._isPremiumMode=t}}o(a,"_playlist"),o(a,"_playlistId"),o(a,"_roundNumber"),o(a,"_correctAnswerCount"),o(a,"_totalRounds"),o(a,"_musicPos"),o(a,"_musicPlaytime"),o(a,"_musicsQnt"),o(a,"_extraTries"),o(a,"_currentTime"),o(a,"_extraTriesCount"),o(a,"_roundsHistory"),o(a,"_isPremiumMode"),o(a,"roundCurrentTime"),o(a,"roundExtraTriesCount");const De={"configs-rounds-subpage":"flex","song-guess-rounds-subpage":"block","song-result-rounds-subpage":"block","final-result-rounds-subpage":"block"};function z(e){Pe("rounds-mode-game-page",e,De[e])}function oe(e){const t=document.createElement("div");t.classList.add("music");const s=document.createElement("img");s.classList.add("music-image");const n=document.createElement("p");n.classList.add("music-name"),n.innerText=e.name;const i=document.createElement("p");return i.classList.add("music-artist"),e.type==="track"?(e.album.images.length!==0&&s.setAttribute("src",e.album.images[0].url),i.innerText=e.artists[0].name):e.type==="episode"&&(e.images.length!==0&&s.setAttribute("src",e.images[0].url),i.innerText=e.show.name),t.appendChild(s),t.appendChild(n),t.appendChild(i),t}function J(e){const t=Math.floor(e/3600),s=Math.floor(e%(60*60)/60),n=e%60;return t?`${String(t).padStart(2,"0")}:${String(s).padStart(2,"0")}:${String(n).padStart(2,"0")}`:`${String(s).padStart(2,"0")}:${String(n).padStart(2,"0")}`}function le(e,t){const s=document.createElement("div"),n=document.createElement("p");n.classList.add("music-round-history-type"),t===!0?n.innerText="Música escolhida":n.innerText="Música sorteada";const i=document.createElement("img");i.classList.add("img-fluid"),i.classList.add("music-image-round-history");const r=document.createElement("p");r.classList.add("music-name-round-history"),r.innerText=e.name;const c=document.createElement("p");return c.classList.add("music-artist-round-history"),e.type==="track"?(e.album.images.length!==0&&i.setAttribute("src",e.album.images[0].url),c.innerText=e.artists[0].name):e.type==="episode"&&(e.images.length!==0&&i.setAttribute("src",e.images[0].url),c.innerText=e.show.name),s.appendChild(n),s.appendChild(i),s.appendChild(r),s.appendChild(c),s}function He(e){const t=document.createElement("div");t.classList.add("carousel-item"),t.classList.add("rounds-mode-history"),e.guessedMusic.id===e.correctMusic.id?t.classList.add("rounds-mode-history-accepted"):t.classList.add("rounds-mode-history-rejected");const s=document.createElement("div");s.classList.add("timer"),s.innerText=`${J(e.timeSpent)}`;const n=document.createElement("div");n.classList.add("music-round-history");const i=document.createElement("div");i.classList.add("music-round-history-image");const r=le(e.guessedMusic,!0);e.guessedMusic.id===e.correctMusic.id?r.classList.add("music-round-history-choice-ac"):r.classList.add("music-round-history-choice-re");const c=le(e.correctMusic,!1);return c.classList.add("music-round-history-correct"),i.appendChild(c),i.appendChild(r),n.appendChild(i),t.appendChild(s),t.appendChild(n),t}function Re(){document.getElementById("rounds-mode-score").innerText=a.score.toString(),document.getElementById("rounds-mode-correct-count").innerText=a.correctAnswersCount.toString(),document.getElementById("rounds-mode-incorrect-count").innerText=a.incorrectAnswerCount.toString(),document.getElementById("rounds-mode-total-rounds").innerText=a.totalRounds.toString(),document.getElementById("rounds-mode-total-time").innerText=J(a.currentTime),document.getElementById("rounds-mode-extra-tries-count").innerText=a.extraTriesCount.toString(),a.extraTries?document.getElementById("rounds-mode-extra-tries").style.display="block":document.getElementById("rounds-mode-extra-tries").style.display="none";const e=document.getElementById("carousel-inner");e.innerHTML="";const t=document.getElementById("nslides");t.innerHTML="";var s=0;for(let n of a.roundsHistory){const i=document.createElement("button"),r=He(n);t.appendChild(i),i.dataset.bsTarget="#carouselExampleCaptions",i.dataset.bsSlideTo=s.toString(),s==0&&(i.classList.add("active"),i.setAttribute("aria-current","true"),r.classList.add("active")),i.setAttribute("aria-label",`Slide ${s+1}`),e.appendChild(r),s++}z("final-result-rounds-subpage")}document.addEventListener("DOMContentLoaded",()=>{var e,t,s;(e=document.getElementById("final-result-return"))==null||e.addEventListener("click",()=>{w("home-page")}),(t=document.getElementById("play-again-rounds-mode-new-configs"))==null||t.addEventListener("click",()=>{a.reset(),Ce()}),(s=document.getElementById("play-again-rounds-mode-same-configs"))==null||s.addEventListener("click",()=>{a.reset(),ge()})});function $e(e,t){a.addRoundHistory(e,t),e.id===t.id?(document.getElementById("song-result-message").innerText="Você acertou !",a.increaseCorrectAnswerCount()):document.getElementById("song-result-message").innerText="Você errou !",document.getElementById("song-result-current-round").innerText=a.roundNumber.toString(),document.getElementById("song-result-total-rounds").innerText=a.totalRounds.toString();const s=document.getElementById("song-result-correct-song");s.innerHTML="",s.appendChild(oe(e));const n=document.getElementById("song-result-guessed-song");n.innerHTML="",n.appendChild(oe(t)),z("song-result-rounds-subpage")}document.addEventListener("DOMContentLoaded",()=>{var e;(e=document.getElementById("song-result-next"))==null||e.addEventListener("click",()=>{a.roundNumber===a.totalRounds?Re():(a.increaseRoundNumber(),fe())})});function Y(e){let t=[...e];for(let s=t.length-1;s>0;s--){const n=Math.floor(Math.random()*(s+1));[t[s],t[n]]=[t[n],t[s]]}return t}async function Fe(){await fetch("https://api.spotify.com/v1/me/player/pause",{method:"PUT",headers:d.accessTokenHeader})}function ee(e){return P(Fe,e)}async function Oe(e,t,s,n){let i=0;return n&&(i=n),await fetch("https://api.spotify.com/v1/me/player/play",{method:"PUT",headers:d.accessTokenHeader,body:JSON.stringify({context_uri:`spotify:playlist:${s}`,position_ms:i,offset:{position:e}})}),window.setTimeout(()=>{ee()},t*1e3)}async function Ue(e,t,s,n,i){return P(Oe,i,e,t,s,n)}class te{constructor(t,s,n,i){o(this,"musicFullDuration");o(this,"playlistId");o(this,"musicNumber");o(this,"musicPlaytimes");o(this,"currentIndex");o(this,"musicPlaytime");o(this,"timeoutId");this.musicNumber=n,this.currentIndex=0,this.musicPlaytimes=[],this.musicFullDuration=t.tracks.items[this.musicNumber].track.duration_ms,this.playlistId=s,this.musicPlaytime=i,this.constructPlaytimes()}async play(){if(!this.finished){let t=this.musicPlaytime;this.musicPlaytimes[this.currentIndex]+t*1e3>this.musicFullDuration&&(t=(this.musicFullDuration-this.musicPlaytimes[this.currentIndex])/1e3-.01),this.timeoutId=await Ue(this.musicNumber,t,this.playlistId,this.musicPlaytimes[this.currentIndex],!0),this.currentIndex+=1}}pause(){clearTimeout(this.timeoutId),ee(!0)}get finished(){return this.currentIndex>=this.musicPlaytimes.length}}class qe extends te{constructPlaytimes(){this.musicPlaytimes.push(0);let t=this.musicPlaytime*1e3;for(;t<this.musicFullDuration;)this.musicPlaytimes.push(t),t+=this.musicPlaytime*1e3;this.musicPlaytimes=Y(this.musicPlaytimes)}close(){}}class Qe extends te{constructPlaytimes(){this.musicPlaytimes.push(0);let t=this.musicPlaytime*1e3;for(;t<this.musicFullDuration;)this.musicPlaytimes.push(t),t+=this.musicPlaytime*1e3}close(){}}class je extends te{constructor(s,n,i,r){super(s,n,i,r);o(this,"playerElement");this.playerElement=this.createPlayerElement(s),this.musicFullDuration=3e4}createPlayerElement(s){const n=s.tracks.items[this.musicNumber].track,i=document.createElement("audio");i.style.display="none";const r=document.createElement("source");return n.type==="track"?r.src=n.preview_url:n.type==="episode"&&(r.src=n.audio_preview_url),r.type="audio/mpeg",i.appendChild(r),document.body.appendChild(i),i}constructPlaytimes(){this.musicPlaytimes.push(0);let s=this.musicPlaytime*1e3;for(;s<this.musicFullDuration;)this.musicPlaytimes.push(s),s+=this.musicPlaytime*1e3}async play(){this.finished||(this.playerElement.play(),setTimeout(()=>{this.playerElement.pause()},this.musicPlaytime*1e3))}pause(){this.playerElement.pause()}close(){this.playerElement.remove()}}function Ve(e,t){return t.filter(s=>s.track.name.toLowerCase().includes(e.toLowerCase()))}function ze(e,t){return t.filter(s=>s.track.type==="episode"?s.track.show.name.toLowerCase().includes(e.toLowerCase()):s.track.type==="track"?s.track.artists[0].name.toLowerCase().includes(e.toLowerCase()):!1)}function Je(e,t,s,n){return Ve(e,Ge(s,ze(t,n)))}function Ge(e,t){return t.filter(s=>s.track.type==="track"?s.track.album.name.toLowerCase().includes(e.toLowerCase()):s.track.type==="episode"?s.track.show.name.toLowerCase().includes(e.toLowerCase()):!1)}function he(e,t,s){const n=document.createElement("div");n.className="playlist-container";const i=document.createElement("table");i.className="playlist-table";const r=document.createElement("thead");r.className="playlist-head";const c=document.createElement("tr");c.className="desktop",c.innerHTML=`
        <th></th>
        <th>Nome</th>
        <th>Artista</th>
        <th>Álbum</th>
    `,r.appendChild(c);const l=document.createElement("tr");l.className="desktop";const v=document.createElement("td"),u=document.createElement("input");u.placeholder="Nome",v.appendChild(u);const H=document.createElement("td"),b=document.createElement("input");b.placeholder="Artista",H.appendChild(b);const T=document.createElement("td"),p=document.createElement("input");p.placeholder="Álbum",T.appendChild(p),l.appendChild(document.createElement("td")),l.appendChild(v),l.appendChild(H),l.appendChild(T),r.appendChild(l);const y=document.createElement("tr");y.className="mobile";const I=document.createElement("td"),h=document.createElement("div");h.className="input-group mb-3";const m=document.createElement("button");m.className="playlist-dropdown-btn btn btn-outline-secondary dropdown-toggle",m.dataset.bsToggle="dropdown",m.ariaExpanded="false",m.innerHTML="Nome";const k=document.createElement("ul");k.className="dropdown-menu";const M=document.createElement("li"),L=document.createElement("a");L.className="playlist-dropdown-item dropdown-item",L.innerHTML="Nome",M.appendChild(L);const _=document.createElement("li"),R=document.createElement("a");R.className="playlist-dropdown-item dropdown-item",R.innerHTML="Artista",_.appendChild(R);const ae=document.createElement("li"),$=document.createElement("a");$.className="playlist-dropdown-item dropdown-item",$.innerHTML="Álbum",ae.appendChild($),k.appendChild(M),k.appendChild(_),k.appendChild(ae);const x=document.createElement("input");x.placeholder="Filtro",h.appendChild(m),h.appendChild(k),h.appendChild(x),I.appendChild(h),y.appendChild(I),r.appendChild(y);const F=document.createElement("tbody");F.className="playlist-body";let O,g=null;const re=E=>{for(let C of E){let N=We(C.track);C.track===O&&(N.classList.add("selected"),g=N),t&&(N.classList.add("clickable"),N.addEventListener("click",()=>{if(t(C.track),O===C.track){s&&s(C.track),g==null||g.classList.remove("selected"),g=null,O=null;return}g&&g.classList.remove("selected"),g=N,O=C.track,g.classList.add("selected")})),F.appendChild(N)}};let U="name";const f={name:{name:"Nome",value:"",input:u},artist:{name:"Artista",value:"",input:b},album:{name:"Album",value:"",input:p}},ce=()=>{F.innerHTML="",re(Je(f.name.value,f.artist.value,f.album.value,e.tracks.items))},ke=()=>{f[U].value=x.value,f[U].input.value=x.value,ce()},G=E=>{const C=f[E].input.value;f[E].value=C,E===U&&(x.value=C),ce()},W=E=>{U=E,m.innerHTML=f[E].name,x.value=f[E].value};return re(e.tracks.items),L.addEventListener("click",()=>{W("name")}),R.addEventListener("click",()=>{W("artist")}),$.addEventListener("click",()=>{W("album")}),u.addEventListener("input",()=>{G("name")}),b.addEventListener("input",()=>{G("artist")}),p.addEventListener("input",()=>{G("album")}),x.addEventListener("input",ke),i.appendChild(r),i.appendChild(F),n.appendChild(i),n}function We(e){const t=document.createElement("tr"),s=document.createElement("td");s.classList.add("album-img");const n=document.createElement("img");n.classList.add("playlist-img");const i=document.createElement("td");i.classList.add("name");const r=document.createElement("span");r.innerText=e.name;const c=document.createElement("td");c.classList.add("artist");const l=document.createElement("span"),v=document.createElement("td");v.classList.add("album");const u=document.createElement("span");return e.type==="track"?(e.album.images.length!==0&&n.setAttribute("src",e.album.images[0].url),l.innerText=e.artists[0].name,u.innerText=e.album.name):e.type==="episode"&&(e.images.length!==0&&n.setAttribute("src",e.images[0].url),l.innerText=e.show.name,u.innerText=e.show.publisher),s.appendChild(n),i.appendChild(r),c.appendChild(l),v.appendChild(u),t.appendChild(s),t.appendChild(i),t.appendChild(c),t.appendChild(v),t}var A=null,S,q,D,X,j=-1;async function ge(){S=Y([...Array(a.playlist.tracks.items.length).keys()]),A=null;const e=document.getElementById("song-guess-hear-next");a.extraTries?e.disabled=!1:e.disabled=!0;const t=document.getElementById("rounds-mode-timer");t.innerHTML=J(0),j!==-1&&clearInterval(j),await fe()}async function fe(){if(a.playlist.tracks.items.length===a.musicsQnt)X=a.playlist.tracks.items;else{let s=[S[a.roundNumber-1]],n=[...S];delete n[a.roundNumber-1],n=Y(n);for(let i=0;i<a.musicsQnt-1;i++)s.push(n[i]);s.sort(),X=s.map(i=>a.playlist.tracks.items[i])}const e=a.playlist;e.tracks.items=X,Xe(a.playlist),a.isPremiumMode?a.musicPos==="random"?q=qe:a.musicPos==="start"&&(q=Qe):q=je,D=new q(a.playlist,a.playlistId,S[a.roundNumber-1],a.musicPlaytime),await D.play();const t=document.getElementById("rounds-mode-timer");j=window.setInterval(()=>{a.increaseCurrentTime(),t.innerHTML=J(a.currentTime)},1e3),z("song-guess-rounds-subpage")}function Xe(e){const t=document.getElementById("playlist-tracks-list-game");t.innerHTML="",t.appendChild(he(e,s=>{A=s},s=>{Ee(s)}))}function Ee(e){clearInterval(j),$e(a.playlist.tracks.items[S[a.roundNumber-1]].track,e),A=null,D.pause(),D.close()}document.addEventListener("DOMContentLoaded",()=>{var e,t;(e=document.getElementById("song-guess-submit"))==null||e.addEventListener("click",()=>{A&&Ee(A)}),(t=document.getElementById("song-guess-hear-next"))==null||t.addEventListener("click",()=>{D.play()})});function Ce(){ve(document.getElementById("configs-rounds-form"));const e=a.playlist.tracks.items.length;document.getElementById("configs-rounds-rounds-number").setAttribute("max",e.toString());const s=document.getElementById("configs-rounds-music-qnt");s.setAttribute("max",e.toString()),s.setAttribute("value",e.toString()),z("configs-rounds-subpage")}function Z(e){const t=document.getElementById("music-pos-init"),s=document.getElementById("music-pos-random");e?(t.disabled=!1,t.checked=!0,s.disabled=!1):(t.disabled=!0,t.checked=!1,s.disabled=!0,s.checked=!1)}function ve(e){const t=document.getElementById("input-premium");e.reset(),d.isLogged?(t.checked=!0,t.disabled=!1,Z(!0)):(t.checked=!1,t.disabled=!0,Z(!1))}document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("input-premium");e.addEventListener("input",()=>{Z(e.checked)});const t=document.getElementById("configs-rounds-form");t.addEventListener("submit",async s=>{s.preventDefault();const n=new FormData(t);a.totalRounds=Number(n.get("rounds-number")),a.musicPos=n.get("music-pos"),a.musicPlaytime=Number(n.get("music-play-time")),a.musicsQnt=Number(n.get("music-qnt")),a.isPremiumMode=n.get("premium")==="on",a.extraTries=n.get("extra-tries")==="on",a.isPremiumMode||(a.playlist.tracks.items=a.playlist.tracks.items.filter(i=>{const r=i.track;return r.type==="track"?r.preview_url!==null:r.type==="episode"?r.audio_preview_url!==null:!1}),a.musicsQnt=Math.min(a.playlist.tracks.items.length,a.musicsQnt)),await ge(),ve(t)})});function Ze(e,t){a.reset(),a.playlist=e,a.playlistId=t,Ce(),w("rounds-mode-game-page")}function Ke(e,t){document.getElementById("playlist-image").setAttribute("src",e.images[0].url),document.getElementById("playlist-name").innerText=e.name,e.description?document.getElementById("playlist-description").innerText=e.description:document.getElementById("playlist-description").innerText="Sem descrição",e.owner.display_name?document.getElementById("playlist-owner").innerText=e.owner.display_name:document.getElementById("playlist-owner").innerText="",document.getElementById("playlist-tracks-count").innerText=String(e.tracks.total);const s=document.getElementById("playlist-tracks-list");s.innerHTML="",s.appendChild(he(e)),document.getElementById("game-start").onclick=()=>{Ze(e,t)},w("playlist-info-page")}document.addEventListener("DOMContentLoaded",()=>{var e;(e=document.getElementById("playlist-return"))==null||e.addEventListener("click",()=>{w("home-page")})});function de(e){return e.track?e.track.is_playable:!1}async function Ye(e){return fetch(`https://api.spotify.com/v1/playlists/${e}?market=${d.country}&additional_types=episode`,{method:"GET",headers:d.accessTokenHeader}).then(t=>t.json()).then(async t=>{var s=t.tracks.next;for(t.tracks.items=t.tracks.items.filter(de);s;)await fetch(s,{method:"GET",headers:d.accessTokenHeader}).then(n=>n.json()).then(n=>{t.tracks.items.push(...n.items.filter(de)),s=n.next});return t})}async function be(e,t){return P(Ye,t,e)}async function et(){return fetch("https://api.spotify.com/v1/me/player/devices",{headers:d.accessTokenHeader,method:"GET"}).then(e=>e.json()).then(e=>e.devices)}async function tt(e){return P(et,e)}function st(e){const t=document.createElement("div");t.classList.add("device");const s=document.createElement("div");s.classList.add("device-is-selected-container");const n=document.createElement("p");n.classList.add("device-is-selected-text"),e.is_active&&(t.classList.add("selected"),n.innerText="Dispositivo seleccionado"),s.appendChild(n),t.appendChild(s);const i=document.createElement("div");i.classList.add("device-icon-container");const r=document.createElement("i");e.type==="Computer"?r.className="bi bi-laptop":e.type==="Smartphone"?r.className="bi bi-phone":e.type==="Speaker"&&(r.className="bi bi-speaker"),i.appendChild(r),t.appendChild(i);const c=document.createElement("div");c.classList.add("device-name-container");const l=document.createElement("p");return l.classList.add("device-name"),l.innerText=e.name,c.appendChild(l),t.appendChild(c),t}function Te(e,t){const s=document.createElement("div");s.classList.add("simplified-playlist-container"),t&&s.classList.add("selectable");const n=document.createElement("img");n.classList.add("simplified-playlist-image"),e.images.length!==0&&n.setAttribute("src",e.images[0].url);const i=document.createElement("p");i.classList.add("simplified-playlist-name"),i.innerText=e.name;const r=document.createElement("p");return r.classList.add("simplified-playlist-description"),e.description?r.innerText=e.description:r.innerText=`De ${e.owner.display_name}`,s.appendChild(n),s.appendChild(i),s.appendChild(r),s}async function nt(e){return fetch("https://api.spotify.com/v1/me/player",{headers:d.accessTokenHeader,method:"PUT",body:JSON.stringify({device_ids:[e]})})}async function it(e,t){return P(nt,t,e)}async function at(){return fetch("https://api.spotify.com/v1/me/playlists?limit=8",{method:"GET",headers:d.accessTokenHeader}).then(e=>e.json())}async function rt(e){return P(at,e)}async function ct(e){const s=["collaborative","description","external_urls","href","id","images","name","owner","public","snapshot_id","tracks(href,total)","type","uri"].join(",");return fetch(`https://api.spotify.com/v1/playlists/${e}?fields=${s}`,{method:"GET",headers:d.accessTokenHeader}).then(n=>n.json())}async function ue(e,t){return P(ct,t,e)}const ie=class{static savePlaylistId(t){const s=this.ids.indexOf(t);return s!==-1&&this.ids.splice(s,1),console.log(t),this.ids.unshift(t),console.log(this.ids),localStorage.setItem(this.storageName,JSON.stringify(this.ids)),s}static getPlaylistsIds(){return this.ids}};let B=ie;o(B,"storageName","play_again_playlists_ids"),o(B,"ids",JSON.parse(localStorage.getItem(ie.storageName)||"[]"));async function ot(){return tt().then(e=>{e||console.log("Não foi possível carregar os dispositivos");const t=document.getElementById("devices-list");for(const s of e){const n=st(s);n.addEventListener("click",async()=>{if(s.id){await it(s.id);for(let i=0;i<t.children.length;i++){const r=t.children[i];r.classList.remove("selected"),r.getElementsByClassName("device-is-selected-text")[0].innerHTML=""}n.classList.add("selected"),n.getElementsByClassName("device-is-selected-text")[0].innerHTML="Dispositivo selecionado",document.getElementById("no-device-selected").style.display="none"}}),t.appendChild(n)}e.length===0?document.getElementById("no-devices-found").style.display="block":e.some(s=>s.is_active)||(document.getElementById("no-device-selected").style.display="block")})}function V(e,t){for(const s of e){const n=Te(s,!0);n.addEventListener("click",async()=>{const i=s.id,r=await be(i,!0);se(r,i)}),t.appendChild(n)}}async function lt(){return rt().then(e=>{const t=document.getElementById("user-playlists-list"),s=document.getElementById("user-playlists-load-more");V(e.items,t);let n=e.next;n?s.onclick=()=>{Q(async()=>{await fetch(n,{method:"GET",headers:d.accessTokenHeader}).then(i=>i.json()).then(i=>{V(i.items,t),n=i.next,n||(s.style.display="none")})})}:s.style.display="none"})}async function me(){const e=B.getPlaylistsIds(),t=document.getElementById("play-again-list"),s=document.getElementById("play-again-load-more"),n=8;let i=0;return Promise.all(e.slice(i,i+n).map(async r=>ue(r))).then(r=>{V(r,t),i+=n,i>=e.length?s.style.display="none":s.onclick=()=>{Q(async()=>{await Promise.all(e.slice(i,i+n).map(async c=>ue(c))).then(c=>{V(c,t),i+=n,i>=e.length&&(s.style.display="none")})})}})}async function dt(){d.isLogged?Q(async()=>{await Promise.all([ot(),lt(),me()])}):(document.getElementById("user-library").style.display="none",document.getElementById("devices-home-page").style.display="none",Q(me))}function se(e,t){const s=document.getElementById("play-again-list");Ke(e,t);const n=B.savePlaylistId(t);n!==-1&&s.children.length>n&&s.removeChild(s.children[n]);const i=Te(e,!0);i.addEventListener("click",async()=>{se(e,t)}),s.insertBefore(i,s.children[0])}document.addEventListener("DOMContentLoaded",async()=>{var e,t;(e=document.getElementById("playlist-form"))==null||e.addEventListener("submit",async s=>{s.preventDefault();const n=document.getElementById("playlist-input").value;try{const i=Ae(n),r=await be(i,!0);se(r,i)}catch(i){console.log(i)}}),(t=document.getElementById("home-btn"))==null||t.addEventListener("click",()=>{d.isLogged&&ee(),w("home-page")})});const ne=new URLSearchParams(window.location.search),ut=ne.get("login")==="true",mt=ne.get("acessToken"),pt=ne.get("country");document.addEventListener("DOMContentLoaded",async()=>{w("empty-page"),d.accessToken=mt,d.country=pt,d.isLogged=ut,await dt(),w("home-page")});async function yt(e){try{return await(await fetch(`https://api.github.com/users/${e}`,{headers:{"X-GitHub-Api-Version":"2022-11-28"}})).json()}catch(t){return console.log(t),null}}document.addEventListener("DOMContentLoaded",()=>{var e;(e=document.getElementById("credit"))==null||e.addEventListener("click",()=>{w("credits-page"),ht();const t=[{nickname:"A-nita",cargos:["Diretora de Artes","Desenvolvedora"],linkedin:"https://www.linkedin.com/in/anita-moura/"},{nickname:"caiopadovan",cargos:["Desenvolvedor"],linkedin:"https://www.linkedin.com/in/caio-padovan-b28a97262/"},{nickname:"Pandxra",cargos:["Faltou na reunião","Desenvolvedora"],linkedin:"https://www.linkedin.com/in/cinthiacosta98/"},{nickname:"GregorioFornetti",cargos:["Chefe","Desenvolvedor"],linkedin:"https://www.linkedin.com/in/greg%C3%B3rio-fornetti-azevedo-4a0193201/"},{nickname:"guilhermesdc",cargos:["Desenvolvedor"],linkedin:"https://www.linkedin.com/in/guilherme-silva-de-camargo-104618220/"},{nickname:"N4NiNi",cargos:["Analista"],linkedin:"https://www.linkedin.com/in/vinicius-nanini/"}],s=document.getElementById("credits_cards");for(let n of t)yt(n.nickname).then(r=>{const c=r.name,l=r.avatar_url,v=r.html_url,u=n.linkedin,H=n.cargos[0],b=document.createElement("div"),T=document.createElement("div"),p=document.createElement("div"),y=document.createElement("div"),I=document.createElement("h5"),h=document.createElement("p"),m=document.createElement("img"),k=document.createElement("i"),M=document.createElement("i"),L=document.createElement("a"),_=document.createElement("a");L.href=v,_.href=u,p.className="position-relative",b.className="col-12 col-sm-6 col-md-4 d-flex align-items-stretch",T.className="zoomeffect cardborder mb-5 card",T.style.width="18rem",y.className="zoomeffect text-white cardcolor card-body d-flex align-items-start flex-column",I.className="cardnome h5 card-title mb-auto",h.className="cardcargo card-text my-3",m.className="p-2 card-img-top",m.setAttribute("src",l),k.className="social_icon bi bi-github fs-2 p-2",M.className="social_icon bi bi-linkedin fs-2 p-2",I.textContent=c,h.textContent=H,b.appendChild(T),T.appendChild(m),T.appendChild(y),y.appendChild(I),y.appendChild(h),y.appendChild(p),_.appendChild(M),p.appendChild(_),L.appendChild(k),p.appendChild(L),s.appendChild(b)})})});function ht(){const e=document.getElementById("credits_cards");e.innerHTML=""}
