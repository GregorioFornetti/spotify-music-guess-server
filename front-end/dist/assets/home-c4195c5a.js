var Ie=Object.defineProperty;var Me=(e,t,n)=>t in e?Ie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var l=(e,t,n)=>(Me(e,typeof t!="symbol"?t+"":t,n),n);import"./modulepreload-polyfill-3cfb730f.js";/* empty css              */import{a as I,U as u,b as j,B as Ne,M as _e}from"./addLoading-82809337.js";const Be={"empty-page":"none","home-page":"flex","playlist-info-page":"flex","rounds-mode-game-page":"block","credits-page":"block","tests-page":"flex"};function x(e){var n;const t=(n=document.getElementById("main"))==null?void 0:n.children;if(t)for(let s=0;s<t.length;s++){const i=t[s];i.style.display="none",i.id===e&&(i.style.display=Be[e])}}function Se(e,t,n){var i;const s=(i=document.getElementById(e))==null?void 0:i.children;if(s)for(let o=0;o<s.length;o++){const r=s[o];r.style.display="none",r.id===t&&(r.style.display=n)}}const Y="([A-Za-z0-9]{22})",Ae=new RegExp(`^${Y}$`),ye=new RegExp(`^spotify:playlist:${Y}$`),he=new RegExp(`^https://open.spotify.com/playlist/${Y}(\\?si=.*)?$`);function De(e){return Ae.test(e)}function He(e){return ye.test(e)}function Re(e){return he.test(e)}function $e(e){return e.match(ye)[1]}function Oe(e){return e.match(he)[1]}function Fe(e){if(e=e.trim(),He(e))return $e(e);if(Re(e))return Oe(e);if(De(e))return e;throw new Error("URI, URL ou ID inválido.")}class a{static reset(){this.resetCorrectAnswerCount(),this.resetRoundNumber(),this.resetCurrentTime(),this.resetExtraTriesCount(),this.resetRoundsHistory()}static get playlist(){return this._playlist}static set playlist(t){this._playlist=t}static get playlistId(){return this._playlistId}static set playlistId(t){this._playlistId=t}static get roundNumber(){return this._roundNumber}static resetRoundNumber(){this._roundNumber=1}static increaseRoundNumber(){if(this._totalRounds<=this._roundNumber)throw new Error("Número do round não pode ser maior que o número total de rounds");this._roundNumber++}static get totalRounds(){return this._totalRounds}static set totalRounds(t){this._totalRounds=t}static get correctAnswersCount(){return this._correctAnswerCount}static resetCorrectAnswerCount(){this._correctAnswerCount=0}static increaseCorrectAnswerCount(){if(this._totalRounds<=this._correctAnswerCount)throw new Error("Número de acertos não pode ser maior que o número total de rounds");this._correctAnswerCount++}static get musicPos(){return this._musicPos}static set musicPos(t){this._musicPos=t}static get musicPlaytime(){return this._musicPlaytime}static set musicPlaytime(t){this._musicPlaytime=t}static get musicsQnt(){return this._musicsQnt}static set musicsQnt(t){this._musicsQnt=t}static get extraTries(){return this._extraTries}static set extraTries(t){this._extraTries=t}static get currentTime(){return this._currentTime}static resetCurrentTime(){this._currentTime=0,this.roundCurrentTime=0}static increaseCurrentTime(){this._currentTime++,this.roundCurrentTime++}static get extraTriesCount(){return this._extraTriesCount}static resetExtraTriesCount(){this._extraTriesCount=0,this.roundExtraTriesCount=0}static increaseExtraTriesCount(){this._extraTriesCount++,this.roundExtraTriesCount++}static get roundsHistory(){return this._roundsHistory}static resetRoundsHistory(){this._roundsHistory=[]}static addRoundHistory(t,n){this.extraTries?this._roundsHistory.push({timeSpent:this.roundCurrentTime,correctMusic:t,guessedMusic:n}):this._roundsHistory.push({timeSpent:this.roundCurrentTime,correctMusic:t,guessedMusic:n,extraTriesCount:this.roundExtraTriesCount}),this.roundCurrentTime=0,this.roundExtraTriesCount=0}static get score(){return Math.round(Math.max(this._correctAnswerCount*100*(8/(this._musicPlaytime+3))-(this._currentTime+this._extraTriesCount*10),25*this._correctAnswerCount))}static get incorrectAnswerCount(){return this._totalRounds-this._correctAnswerCount}static get isPremiumMode(){return this._isPremiumMode}static set isPremiumMode(t){this._isPremiumMode=t}}l(a,"_playlist"),l(a,"_playlistId"),l(a,"_roundNumber"),l(a,"_correctAnswerCount"),l(a,"_totalRounds"),l(a,"_musicPos"),l(a,"_musicPlaytime"),l(a,"_musicsQnt"),l(a,"_extraTries"),l(a,"_currentTime"),l(a,"_extraTriesCount"),l(a,"_roundsHistory"),l(a,"_isPremiumMode"),l(a,"roundCurrentTime"),l(a,"roundExtraTriesCount");const Ue={"configs-rounds-subpage":"flex","song-guess-rounds-subpage":"block","song-result-rounds-subpage":"block","final-result-rounds-subpage":"block"};function J(e){Se("rounds-mode-game-page",e,Ue[e])}function le(e){const t=document.createElement("div");t.classList.add("music");const n=document.createElement("img");n.classList.add("music-image");const s=document.createElement("p");s.classList.add("music-name"),s.innerText=e.name;const i=document.createElement("p");return i.classList.add("music-artist"),e.type==="track"?(e.album.images.length!==0&&n.setAttribute("src",e.album.images[0].url),i.innerText=e.artists[0].name):e.type==="episode"&&(e.images.length!==0&&n.setAttribute("src",e.images[0].url),i.innerText=e.show.name),t.appendChild(n),t.appendChild(s),t.appendChild(i),t}function G(e){const t=Math.floor(e/3600),n=Math.floor(e%(60*60)/60),s=e%60;return t?`${String(t).padStart(2,"0")}:${String(n).padStart(2,"0")}:${String(s).padStart(2,"0")}`:`${String(n).padStart(2,"0")}:${String(s).padStart(2,"0")}`}function de(e,t){const n=document.createElement("div"),s=document.createElement("p");s.classList.add("music-round-history-type"),t===!0?s.innerText="Música escolhida":s.innerText="Música sorteada";const i=document.createElement("img");i.classList.add("img-fluid"),i.classList.add("music-image-round-history");const o=document.createElement("p");o.classList.add("music-name-round-history"),o.innerText=e.name;const r=document.createElement("p");return r.classList.add("music-artist-round-history"),e.type==="track"?(e.album.images.length!==0&&i.setAttribute("src",e.album.images[0].url),r.innerText=e.artists[0].name):e.type==="episode"&&(e.images.length!==0&&i.setAttribute("src",e.images[0].url),r.innerText=e.show.name),n.appendChild(s),n.appendChild(i),n.appendChild(o),n.appendChild(r),n}function qe(e){const t=document.createElement("div");t.classList.add("carousel-item"),t.classList.add("rounds-mode-history"),e.guessedMusic.id===e.correctMusic.id?t.classList.add("rounds-mode-history-accepted"):t.classList.add("rounds-mode-history-rejected");const n=document.createElement("div");n.classList.add("timer"),n.innerText=`${G(e.timeSpent)}`;const s=document.createElement("div");s.classList.add("music-round-history");const i=document.createElement("div");i.classList.add("music-round-history-image");const o=de(e.guessedMusic,!0);e.guessedMusic.id===e.correctMusic.id?o.classList.add("music-round-history-choice-ac"):o.classList.add("music-round-history-choice-re");const r=de(e.correctMusic,!1);return r.classList.add("music-round-history-correct"),i.appendChild(r),i.appendChild(o),s.appendChild(i),t.appendChild(n),t.appendChild(s),t}function Qe(){document.getElementById("rounds-mode-score").innerText=a.score.toString(),document.getElementById("rounds-mode-correct-count").innerText=a.correctAnswersCount.toString(),document.getElementById("rounds-mode-incorrect-count").innerText=a.incorrectAnswerCount.toString(),document.getElementById("rounds-mode-total-rounds").innerText=a.totalRounds.toString(),document.getElementById("rounds-mode-total-time").innerText=G(a.currentTime),document.getElementById("rounds-mode-extra-tries-count").innerText=a.extraTriesCount.toString(),a.extraTries?document.getElementById("rounds-mode-extra-tries").style.display="block":document.getElementById("rounds-mode-extra-tries").style.display="none";const e=document.getElementById("carousel-inner");e.innerHTML="";const t=document.getElementById("nslides");t.innerHTML="";var n=0;for(let s of a.roundsHistory){const i=document.createElement("button"),o=qe(s);t.appendChild(i),i.dataset.bsTarget="#carouselExampleCaptions",i.dataset.bsSlideTo=n.toString(),n==0&&(i.classList.add("active"),i.setAttribute("aria-current","true"),o.classList.add("active")),i.setAttribute("aria-label",`Slide ${n+1}`),e.appendChild(o),n++}J("final-result-rounds-subpage")}document.addEventListener("DOMContentLoaded",()=>{var e,t,n;(e=document.getElementById("final-result-return"))==null||e.addEventListener("click",()=>{x("home-page")}),(t=document.getElementById("play-again-rounds-mode-new-configs"))==null||t.addEventListener("click",()=>{a.reset(),Ce()}),(n=document.getElementById("play-again-rounds-mode-same-configs"))==null||n.addEventListener("click",()=>{a.reset(),fe()})});function je(e,t){a.addRoundHistory(e,t),e.id===t.id?(document.getElementById("song-result-message").innerText="Você acertou !",a.increaseCorrectAnswerCount()):document.getElementById("song-result-message").innerText="Você errou !",document.getElementById("song-result-current-round").innerText=a.roundNumber.toString(),document.getElementById("song-result-total-rounds").innerText=a.totalRounds.toString();const n=document.getElementById("song-result-correct-song");n.innerHTML="",n.appendChild(le(e));const s=document.getElementById("song-result-guessed-song");s.innerHTML="",s.appendChild(le(t)),J("song-result-rounds-subpage")}document.addEventListener("DOMContentLoaded",()=>{var e;(e=document.getElementById("song-result-next"))==null||e.addEventListener("click",()=>{a.roundNumber===a.totalRounds?Qe():(a.increaseRoundNumber(),Ee())})});function ee(e){let t=[...e];for(let n=t.length-1;n>0;n--){const s=Math.floor(Math.random()*(n+1));[t[n],t[s]]=[t[s],t[n]]}return t}async function Ve(){await fetch("https://api.spotify.com/v1/me/player/pause",{method:"PUT",headers:u.accessTokenHeader})}function te(e){return I(Ve,e)}async function ze(e,t,n,s){let i=0;return s&&(i=s),await fetch("https://api.spotify.com/v1/me/player/play",{method:"PUT",headers:u.accessTokenHeader,body:JSON.stringify({context_uri:`spotify:playlist:${n}`,position_ms:i,offset:{position:e}})}),window.setTimeout(()=>{te()},t*1e3)}async function Je(e,t,n,s,i){return I(ze,i,e,t,n,s)}class ne{constructor(t,n,s,i){l(this,"musicFullDuration");l(this,"playlistId");l(this,"musicNumber");l(this,"musicPlaytimes");l(this,"currentIndex");l(this,"musicPlaytime");l(this,"timeoutId");this.musicNumber=s,this.currentIndex=0,this.musicPlaytimes=[],this.musicFullDuration=t.tracks.items[this.musicNumber].track.duration_ms,this.playlistId=n,this.musicPlaytime=i,this.constructPlaytimes()}async play(){if(!this.finished){let t=this.musicPlaytime;this.musicPlaytimes[this.currentIndex]+t*1e3>this.musicFullDuration&&(t=(this.musicFullDuration-this.musicPlaytimes[this.currentIndex])/1e3-.01),this.timeoutId=await Je(this.musicNumber,t,this.playlistId,this.musicPlaytimes[this.currentIndex],!0),this.currentIndex+=1}}pause(){clearTimeout(this.timeoutId),te(!0)}get finished(){return this.currentIndex>=this.musicPlaytimes.length}}class Ge extends ne{constructPlaytimes(){this.musicPlaytimes.push(0);let t=this.musicPlaytime*1e3;for(;t<this.musicFullDuration;)this.musicPlaytimes.push(t),t+=this.musicPlaytime*1e3;this.musicPlaytimes=ee(this.musicPlaytimes)}close(){}}class We extends ne{constructPlaytimes(){this.musicPlaytimes.push(0);let t=this.musicPlaytime*1e3;for(;t<this.musicFullDuration;)this.musicPlaytimes.push(t),t+=this.musicPlaytime*1e3}close(){}}class Xe extends ne{constructor(n,s,i,o){super(n,s,i,o);l(this,"playerElement");this.playerElement=this.createPlayerElement(n),this.musicFullDuration=3e4}createPlayerElement(n){const s=n.tracks.items[this.musicNumber].track,i=document.createElement("audio");i.style.display="none";const o=document.createElement("source");return s.type==="track"?o.src=s.preview_url:s.type==="episode"&&(o.src=s.audio_preview_url),o.type="audio/mpeg",i.appendChild(o),document.body.appendChild(i),i}constructPlaytimes(){this.musicPlaytimes.push(0);let n=this.musicPlaytime*1e3;for(;n<this.musicFullDuration;)this.musicPlaytimes.push(n),n+=this.musicPlaytime*1e3}async play(){this.finished||(this.playerElement.play(),setTimeout(()=>{this.playerElement.pause()},this.musicPlaytime*1e3))}pause(){this.playerElement.pause()}close(){this.playerElement.remove()}}function Ze(e,t){return t.filter(n=>n.track.name.toLowerCase().includes(e.toLowerCase()))}function Ke(e,t){return t.filter(n=>n.track.type==="episode"?n.track.show.name.toLowerCase().includes(e.toLowerCase()):n.track.type==="track"?n.track.artists[0].name.toLowerCase().includes(e.toLowerCase()):!1)}function Ye(e,t,n,s){return Ze(e,et(n,Ke(t,s)))}function et(e,t){return t.filter(n=>n.track.type==="track"?n.track.album.name.toLowerCase().includes(e.toLowerCase()):n.track.type==="episode"?n.track.show.name.toLowerCase().includes(e.toLowerCase()):!1)}function ge(e,t,n){const s=document.createElement("div");s.className="playlist-container";const i=document.createElement("table");i.className="playlist-table";const o=document.createElement("thead");o.className="playlist-head";const r=document.createElement("tr");r.className="desktop",r.innerHTML=`
        <th></th>
        <th>Nome</th>
        <th>Artista</th>
        <th>Álbum</th>
    `,o.appendChild(r);const c=document.createElement("tr");c.className="desktop";const d=document.createElement("td"),m=document.createElement("input");m.placeholder="Nome",d.appendChild(m);const f=document.createElement("td"),y=document.createElement("input");y.placeholder="Artista",f.appendChild(y);const h=document.createElement("td"),g=document.createElement("input");g.placeholder="Álbum",h.appendChild(g),c.appendChild(document.createElement("td")),c.appendChild(d),c.appendChild(f),c.appendChild(h),o.appendChild(c);const p=document.createElement("tr");p.className="mobile";const M=document.createElement("td"),v=document.createElement("div");v.className="input-group mb-3";const E=document.createElement("button");E.className="playlist-dropdown-btn btn btn-outline-secondary dropdown-toggle",E.dataset.bsToggle="dropdown",E.ariaExpanded="false",E.innerHTML="Nome";const k=document.createElement("ul");k.className="dropdown-menu";const S=document.createElement("li"),w=document.createElement("a");w.className="playlist-dropdown-item dropdown-item",w.innerHTML="Nome",S.appendChild(w);const N=document.createElement("li"),$=document.createElement("a");$.className="playlist-dropdown-item dropdown-item",$.innerHTML="Artista",N.appendChild($);const oe=document.createElement("li"),O=document.createElement("a");O.className="playlist-dropdown-item dropdown-item",O.innerHTML="Álbum",oe.appendChild(O),k.appendChild(S),k.appendChild(N),k.appendChild(oe);const P=document.createElement("input");P.placeholder="Filtro",v.appendChild(E),v.appendChild(k),v.appendChild(P),M.appendChild(v),p.appendChild(M),o.appendChild(p);const F=document.createElement("tbody");F.className="playlist-body";let U,C=null;const re=L=>{for(let T of L){let _=tt(T.track);T.track===U&&(_.classList.add("selected"),C=_),t&&(_.classList.add("clickable"),_.addEventListener("click",()=>{if(t(T.track),U===T.track){n&&n(T.track),C==null||C.classList.remove("selected"),C=null,U=null;return}C&&C.classList.remove("selected"),C=_,U=T.track,C.classList.add("selected")})),F.appendChild(_)}};let q="name";const b={name:{name:"Nome",value:"",input:m},artist:{name:"Artista",value:"",input:y},album:{name:"Album",value:"",input:g}},ce=()=>{F.innerHTML="",re(Ye(b.name.value,b.artist.value,b.album.value,e.tracks.items))},Pe=()=>{b[q].value=P.value,b[q].input.value=P.value,ce()},W=L=>{const T=b[L].input.value;b[L].value=T,L===q&&(P.value=T),ce()},X=L=>{q=L,E.innerHTML=b[L].name,P.value=b[L].value};return re(e.tracks.items),w.addEventListener("click",()=>{X("name")}),$.addEventListener("click",()=>{X("artist")}),O.addEventListener("click",()=>{X("album")}),m.addEventListener("input",()=>{W("name")}),y.addEventListener("input",()=>{W("artist")}),g.addEventListener("input",()=>{W("album")}),P.addEventListener("input",Pe),i.appendChild(o),i.appendChild(F),s.appendChild(i),s}function tt(e){const t=document.createElement("tr"),n=document.createElement("td");n.classList.add("album-img");const s=document.createElement("img");s.classList.add("playlist-img");const i=document.createElement("td");i.classList.add("name");const o=document.createElement("span");o.innerText=e.name;const r=document.createElement("td");r.classList.add("artist");const c=document.createElement("span"),d=document.createElement("td");d.classList.add("album");const m=document.createElement("span");return e.type==="track"?(e.album.images.length!==0&&s.setAttribute("src",e.album.images[0].url),c.innerText=e.artists[0].name,m.innerText=e.album.name):e.type==="episode"&&(e.images.length!==0&&s.setAttribute("src",e.images[0].url),c.innerText=e.show.name,m.innerText=e.show.publisher),n.appendChild(s),i.appendChild(o),r.appendChild(c),d.appendChild(m),t.appendChild(n),t.appendChild(i),t.appendChild(r),t.appendChild(d),t}var H=null,D,Q,R,Z,V=-1;async function fe(){D=ee([...Array(a.playlist.tracks.items.length).keys()]),H=null;const e=document.getElementById("song-guess-hear-next");a.extraTries?e.disabled=!1:e.disabled=!0;const t=document.getElementById("rounds-mode-timer");t.innerHTML=G(0),V!==-1&&clearInterval(V),await Ee()}async function Ee(){if(a.playlist.tracks.items.length===a.musicsQnt)Z=a.playlist.tracks.items;else{let n=[D[a.roundNumber-1]],s=[...D];delete s[a.roundNumber-1],s=ee(s);for(let i=0;i<a.musicsQnt-1;i++)n.push(s[i]);n.sort(),Z=n.map(i=>a.playlist.tracks.items[i])}const e=a.playlist;e.tracks.items=Z,nt(a.playlist),a.isPremiumMode?a.musicPos==="random"?Q=Ge:a.musicPos==="start"&&(Q=We):Q=Xe,R=new Q(a.playlist,a.playlistId,D[a.roundNumber-1],a.musicPlaytime),await R.play();const t=document.getElementById("rounds-mode-timer");V=window.setInterval(()=>{a.increaseCurrentTime(),t.innerHTML=G(a.currentTime)},1e3),J("song-guess-rounds-subpage")}function nt(e){const t=document.getElementById("playlist-tracks-list-game");t.innerHTML="",t.appendChild(ge(e,n=>{H=n},n=>{ve(n)}))}function ve(e){clearInterval(V),je(a.playlist.tracks.items[D[a.roundNumber-1]].track,e),H=null,R.pause(),R.close()}document.addEventListener("DOMContentLoaded",()=>{var e,t;(e=document.getElementById("song-guess-submit"))==null||e.addEventListener("click",()=>{H&&ve(H)}),(t=document.getElementById("song-guess-hear-next"))==null||t.addEventListener("click",()=>{R.play()})});function Ce(){be(document.getElementById("configs-rounds-form"));const e=a.playlist.tracks.items.length;document.getElementById("configs-rounds-rounds-number").setAttribute("max",e.toString());const n=document.getElementById("configs-rounds-music-qnt");n.setAttribute("max",e.toString()),n.setAttribute("value",e.toString()),J("configs-rounds-subpage")}function K(e){const t=document.getElementById("music-pos-init"),n=document.getElementById("music-pos-random");e?(t.disabled=!1,t.checked=!0,n.disabled=!1):(t.disabled=!0,t.checked=!1,n.disabled=!0,n.checked=!1)}function be(e){const t=document.getElementById("input-premium");e.reset(),u.isLogged?(t.checked=!0,t.disabled=!1,K(!0)):(t.checked=!1,t.disabled=!0,K(!1))}document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("input-premium");e.addEventListener("input",()=>{K(e.checked)});const t=document.getElementById("configs-rounds-form");t.addEventListener("submit",async n=>{n.preventDefault();const s=new FormData(t);a.totalRounds=Number(s.get("rounds-number")),a.musicPos=s.get("music-pos"),a.musicPlaytime=Number(s.get("music-play-time")),a.musicsQnt=Number(s.get("music-qnt")),a.isPremiumMode=s.get("premium")==="on",a.extraTries=s.get("extra-tries")==="on",a.isPremiumMode||(a.playlist.tracks.items=a.playlist.tracks.items.filter(i=>{const o=i.track;return o.type==="track"?o.preview_url!==null:o.type==="episode"?o.audio_preview_url!==null:!1}),a.musicsQnt=Math.min(a.playlist.tracks.items.length,a.musicsQnt)),await fe(),be(t)})});function st(e,t){a.reset(),a.playlist=e,a.playlistId=t,Ce(),x("rounds-mode-game-page")}function it(e,t){document.getElementById("playlist-image").setAttribute("src",e.images[0].url),document.getElementById("playlist-name").innerText=e.name,e.description?document.getElementById("playlist-description").innerText=e.description:document.getElementById("playlist-description").innerText="Sem descrição",e.owner.display_name?document.getElementById("playlist-owner").innerText=e.owner.display_name:document.getElementById("playlist-owner").innerText="",document.getElementById("playlist-tracks-count").innerText=String(e.tracks.total);const n=document.getElementById("playlist-tracks-list");n.innerHTML="",n.appendChild(ge(e)),document.getElementById("game-start").onclick=()=>{st(e,t)},x("playlist-info-page")}document.addEventListener("DOMContentLoaded",()=>{var e;(e=document.getElementById("playlist-return"))==null||e.addEventListener("click",()=>{x("home-page")})});function me(e){return e.track?e.track.is_playable:!1}async function at(e){return fetch(`https://api.spotify.com/v1/playlists/${e}?market=${u.country}&additional_types=episode`,{method:"GET",headers:u.accessTokenHeader}).then(t=>t.json()).then(async t=>{var n=t.tracks.next;for(t.tracks.items=t.tracks.items.filter(me);n;)await fetch(n,{method:"GET",headers:u.accessTokenHeader}).then(s=>s.json()).then(s=>{t.tracks.items.push(...s.items.filter(me)),n=s.next});return t})}async function Le(e,t){return I(at,t,e)}async function ot(){return fetch("https://api.spotify.com/v1/me/player/devices",{headers:u.accessTokenHeader,method:"GET"}).then(e=>e.json()).then(e=>e.devices)}async function Te(e){return I(ot,e)}function ke(e){const t=document.createElement("div");t.classList.add("device");const n=document.createElement("div");n.classList.add("device-is-selected-container");const s=document.createElement("p");s.classList.add("device-is-selected-text"),e.is_active&&(t.classList.add("selected"),s.innerText="Dispositivo seleccionado"),n.appendChild(s),t.appendChild(n);const i=document.createElement("div");i.classList.add("device-icon-container");const o=document.createElement("i");e.type==="Computer"?o.className="bi bi-laptop":e.type==="Smartphone"?o.className="bi bi-phone":e.type==="Speaker"&&(o.className="bi bi-speaker"),i.appendChild(o),t.appendChild(i);const r=document.createElement("div");r.classList.add("device-name-container");const c=document.createElement("p");return c.classList.add("device-name"),c.innerText=e.name,r.appendChild(c),t.appendChild(r),t}function we(e,t){const n=document.createElement("div");n.classList.add("simplified-playlist-container"),t&&n.classList.add("selectable");const s=document.createElement("img");s.classList.add("simplified-playlist-image"),e.images.length!==0&&s.setAttribute("src",e.images[0].url);const i=document.createElement("p");i.classList.add("simplified-playlist-name"),i.innerText=e.name;const o=document.createElement("p");return o.classList.add("simplified-playlist-description"),e.description?o.innerText=e.description:o.innerText=`De ${e.owner.display_name}`,n.appendChild(s),n.appendChild(i),n.appendChild(o),n}async function rt(e){return fetch("https://api.spotify.com/v1/me/player",{headers:u.accessTokenHeader,method:"PUT",body:JSON.stringify({device_ids:[e]})})}async function xe(e,t){return I(rt,t,e)}async function ct(){return fetch("https://api.spotify.com/v1/me/playlists?limit=8",{method:"GET",headers:u.accessTokenHeader}).then(e=>e.json())}async function lt(e){return I(ct,e)}async function dt(e){const n=["collaborative","description","external_urls","href","id","images","name","owner","public","snapshot_id","tracks(href,total)","type","uri"].join(",");return fetch(`https://api.spotify.com/v1/playlists/${e}?fields=${n}`,{method:"GET",headers:u.accessTokenHeader}).then(s=>s.json())}async function ue(e,t){return I(dt,t,e)}const ae=class{static savePlaylistId(t){const n=this.ids.indexOf(t);return n!==-1&&this.ids.splice(n,1),console.log(t),this.ids.unshift(t),console.log(this.ids),localStorage.setItem(this.storageName,JSON.stringify(this.ids)),n}static getPlaylistsIds(){return this.ids}};let B=ae;l(B,"storageName","play_again_playlists_ids"),l(B,"ids",JSON.parse(localStorage.getItem(ae.storageName)||"[]"));async function mt(){return Te().then(e=>{e||console.log("Não foi possível carregar os dispositivos");const t=document.getElementById("devices-list");for(const n of e){const s=ke(n);s.addEventListener("click",async()=>{if(n.id){await xe(n.id);for(let i=0;i<t.children.length;i++){const o=t.children[i];o.classList.remove("selected"),o.getElementsByClassName("device-is-selected-text")[0].innerHTML=""}s.classList.add("selected"),s.getElementsByClassName("device-is-selected-text")[0].innerHTML="Dispositivo selecionado",document.getElementById("no-device-selected").style.display="none"}}),t.appendChild(s)}e.length===0?document.getElementById("no-devices-found").style.display="block":e.some(n=>n.is_active)||(document.getElementById("no-device-selected").style.display="block")})}function z(e,t){for(const n of e){const s=we(n,!0);s.addEventListener("click",async()=>{const i=n.id,o=await Le(i,!0);se(o,i)}),t.appendChild(s)}}async function ut(){return lt().then(e=>{const t=document.getElementById("user-playlists-list"),n=document.getElementById("user-playlists-load-more");z(e.items,t);let s=e.next;s?n.onclick=()=>{j(async()=>{await fetch(s,{method:"GET",headers:u.accessTokenHeader}).then(i=>i.json()).then(i=>{z(i.items,t),s=i.next,s||(n.style.display="none")})})}:n.style.display="none"})}async function pe(){const e=B.getPlaylistsIds(),t=document.getElementById("play-again-list"),n=document.getElementById("play-again-load-more"),s=8;let i=0;return Promise.all(e.slice(i,i+s).map(async o=>ue(o))).then(o=>{z(o,t),i+=s,i>=e.length?n.style.display="none":n.onclick=()=>{j(async()=>{await Promise.all(e.slice(i,i+s).map(async r=>ue(r))).then(r=>{z(r,t),i+=s,i>=e.length&&(n.style.display="none")})})}})}async function pt(){u.isLogged?j(async()=>{await Promise.all([mt(),ut(),pe()])}):(document.getElementById("user-library").style.display="none",document.getElementById("devices-home-page").style.display="none",j(pe))}function se(e,t){const n=document.getElementById("play-again-list");it(e,t);const s=B.savePlaylistId(t);s!==-1&&n.children.length>s&&n.removeChild(n.children[s]);const i=we(e,!0);i.addEventListener("click",async()=>{se(e,t)}),n.insertBefore(i,n.children[0])}document.addEventListener("DOMContentLoaded",async()=>{var e,t;(e=document.getElementById("playlist-form"))==null||e.addEventListener("submit",async n=>{n.preventDefault();const s=document.getElementById("playlist-input").value;try{const i=Fe(s),o=await Le(i,!0);se(o,i)}catch(i){console.log(i)}}),(t=document.getElementById("home-btn"))==null||t.addEventListener("click",()=>{u.isLogged&&te(),x("home-page")})});const ie=new URLSearchParams(window.location.search),yt=ie.get("login")==="true",ht=ie.get("acessToken"),gt=ie.get("country");document.addEventListener("DOMContentLoaded",async()=>{x("empty-page"),u.accessToken=ht,u.country=gt,u.isLogged=yt,await pt(),x("home-page")});async function ft(e){try{return await(await fetch(`https://api.github.com/users/${e}`,{headers:{"X-GitHub-Api-Version":"2022-11-28"}})).json()}catch(t){return console.log(t),null}}document.addEventListener("DOMContentLoaded",()=>{var e;(e=document.getElementById("credit"))==null||e.addEventListener("click",()=>{x("credits-page"),Et();const t=[{nickname:"A-nita",cargos:["Diretora de Artes","Desenvolvedora"],linkedin:"https://www.linkedin.com/in/anita-moura/"},{nickname:"caiopadovan",cargos:["Desenvolvedor"],linkedin:"https://www.linkedin.com/in/caio-padovan-b28a97262/"},{nickname:"Pandxra",cargos:["Faltou na reunião","Desenvolvedora"],linkedin:"https://www.linkedin.com/in/cinthiacosta98/"},{nickname:"GregorioFornetti",cargos:["Chefe","Desenvolvedor"],linkedin:"https://www.linkedin.com/in/greg%C3%B3rio-fornetti-azevedo-4a0193201/"},{nickname:"guilhermesdc",cargos:["Desenvolvedor"],linkedin:"https://www.linkedin.com/in/guilherme-silva-de-camargo-104618220/"},{nickname:"N4NiNi",cargos:["Analista"],linkedin:"https://www.linkedin.com/in/vinicius-nanini/"}],n=document.getElementById("credits_cards");for(let s of t)ft(s.nickname).then(o=>{const r=o.name,c=o.avatar_url,d=o.html_url,m=s.linkedin,f=s.cargos[0],y=document.createElement("div"),h=document.createElement("div"),g=document.createElement("div"),p=document.createElement("div"),M=document.createElement("h5"),v=document.createElement("p"),E=document.createElement("img"),k=document.createElement("i"),S=document.createElement("i"),w=document.createElement("a"),N=document.createElement("a");w.href=d,N.href=m,g.className="position-relative",y.className="col-12 col-sm-6 col-md-4 d-flex align-items-stretch",h.className="zoomeffect cardborder mb-5 card",h.style.width="18rem",p.className="zoomeffect text-white cardcolor card-body d-flex align-items-start flex-column",M.className="cardnome h5 card-title mb-auto",v.className="cardcargo card-text my-3",E.className="p-2 card-img-top",E.setAttribute("src",c),k.className="social_icon bi bi-github fs-2 p-2",S.className="social_icon bi bi-linkedin fs-2 p-2",M.textContent=r,v.textContent=f,y.appendChild(h),h.appendChild(E),h.appendChild(p),p.appendChild(M),p.appendChild(v),p.appendChild(g),N.appendChild(S),g.appendChild(N),w.appendChild(k),g.appendChild(w),n.appendChild(y)})})});function Et(){const e=document.getElementById("credits_cards");e.innerHTML=""}class vt extends Ne{constructor(t,n,s,i,o,r,c){const d=document.createElement("div");d.className="modal fade",d.id=t,d.tabIndex=-1,d.ariaLabel=n,d.ariaHidden="true",d.dataset.bsTheme="dark",s||(d.dataset.bsBackdrop="static");const m=document.createElement("div");m.className="modal-dialog",i&&m.classList.add("modal-dialog-centered"),o&&m.classList.add(`modal-${o}`),c&&(c==="always"?m.classList.add("modal-fullscreen"):m.classList.add(`modal-fullscreen-${c}-down`));const f=document.createElement("div");f.className="modal-content visible-modal-content";const y=document.createElement("div");if(y.className="modal-header",y.innerHTML=`<h2 class="modal-title fs-5 h1">${n}</h2>`,s){const p=document.createElement("button");p.type="button",p.className="btn-close",p.ariaLabel="close",p.dataset.bsDismiss="modal",y.appendChild(p)}const h=document.createElement("div");h.className="modal-body",r&&h.appendChild(r);const g=document.createElement("div");g.className="modal-footer",f.appendChild(y),f.appendChild(h),f.appendChild(g),m.appendChild(f),d.appendChild(m),document.addEventListener("DOMContentLoaded",()=>{document.body.appendChild(d)}),super(new _e(d),d,h)}}const A=new vt("deviceSelectedModal","modal-devices",!1,!0);document.addEventListener("DOMContentLoaded",()=>{console.log("inicializando o modal");const e=document.getElementById("configs-rounds-form");console.log(e);var t;e==null||e.addEventListener("submit",function(){let n=document.getElementById("devices-list");if((n==null?void 0:n.innerHTML.trim())===""){t=document.createElement("div");var s=document.createElement("p");t.className="mensagem-devices",s.textContent="nenhum dispositivo encontrado, favor abrir o spotfy.",t.appendChild(s),A.addContent(t),A.show()}else console.log("tem device, agora seleciona"),document.getElementById("input-premium")&&Te().then(o=>{console.log(o.length);const r=document.createElement("div");for(const c of o){const d=ke(c);d.addEventListener("click",async()=>{c.id&&(await xe(c.id),A.hide())}),r.appendChild(d)}o.some(c=>c.is_active)||(A.addContent(r),A.show())})})});
